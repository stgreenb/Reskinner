{"version":3,"file":"ds-reskinner.mjs","sources":["src/reskinner-app.js","src/module.js"],"sourcesContent":["/**\n * ReskinApp - Main application for reskinning monsters\n */\n\n/**\n * The Reskin application window\n */\nexport class ReskinApp extends Application {\n  /**\n   * Create the ReskinApp\n   * @param {Actor} actor - The actor to reskin\n   * @param {Object} options - Additional options\n   */\n  constructor(actor, options = {}) {\n    super(options);\n    \n    this.actor = actor;\n  }\n\n  /**\n   * Default configuration for the application\n   * @returns {Object} Application options\n   * @override\n   */\n  static get defaultOptions() {\n    return mergeObject(super.defaultOptions, {\n      template: 'modules/ds-reskinner/templates/reskin-form.hbs',\n      classes: ['reskinner-app'],\n      width: 400,\n      height: 300,\n      resizable: false,\n      minimizable: true,\n      title: game.i18n.localize('DSRESKINNER.ReskinMonster')\n    });\n  }\n\n  /**\n   * Get the data object for the template\n   * @returns {Object} Template data\n   * @override\n   */\n  getData() {\n    return {\n      actor: this.actor,\n      actorName: this.actor.name,\n      actorId: this.actor.id\n    };\n  }\n\n  /**\n   * Activate event listeners\n   * @param {HTMLElement} html - The rendered HTML\n   * @override\n   */\n  activateListeners(html) {\n    super.activateListeners(html);\n\n    // Handle form submission\n    html.find('form.reskinner-form').on('submit', this._onFormSubmit.bind(this));\n  }\n\n  /**\n   * Handle form submission\n   * @param {Event} event - The submit event\n   * @private\n   */\n  async _onFormSubmit(event) {\n    event.preventDefault();\n    \n    const formData = new FormData(event.target);\n    const newName = formData.get('actorName');\n    \n    if (!newName || newName.trim() === '') {\n      ui.notifications.error(game.i18n.localize('DSRESKINNER.NameEmptyError'));\n      return;\n    }\n\n    try {\n      // Clone the actor\n      const clonedActor = await this.actor.clone({\n        name: newName.trim()\n      });\n\n      // Create the cloned actor in the actors directory\n      await Actor.create(clonedActor.toObject());\n      \n      ui.notifications.info(game.i18n.format('DSRESKINNER.CreateSuccess', { name: newName }));\n      this.close();\n    } catch (error) {\n      console.error('Draw Steel Reskinner | Error creating reskin:', error);\n      ui.notifications.error(game.i18n.localize('DSRESKINNER.CreateError'));\n    }\n  }\n}\n","/**\n * Draw Steel Reskinner Module\n * A Foundry VTT module for reskinning Draw Steel monsters\n */\n\nimport { ReskinApp } from './reskinner-app.js';\n\n/**\n * Check if an actor is a monster NPC that can be reskinned\n * @param {Actor} actor - The actor to check\n * @returns {boolean} True if the actor is a reskinnable monster\n */\nfunction isReskinnableMonster(actor) {\n  // Check if it's an NPC (monster) in the Draw Steel system\n  if (!actor || actor.type !== 'npc') return false;\n  \n  // Check if it's in the Draw Steel system\n  const isDrawSteel = game.system.id === 'draw-steel';\n  if (!isDrawSteel) return false;\n  \n  return true;\n}\n\n/**\n * Add Reskin button to actor sheet headers\n */\nHooks.on('getActorSheetHeaderButtons', (sheet, buttons) => {\n  if (!isReskinnableMonster(sheet.actor)) return;\n  \n  buttons.unshift({\n    class: 'reskin-actor',\n    icon: 'fas fa-palette',\n    label: game.i18n.localize('DSRESKINNER.Reskin'),\n    onclick: () => {\n      const reskinApp = new ReskinApp(sheet.actor);\n      reskinApp.render(true);\n    }\n  });\n});\n\n/**\n * Add Reskin option to actor directory context menu\n */\nHooks.on('getActorDirectoryEntryContext', (html, entryOptions) => {\n  const actor = entryOptions[0]?.document;\n  if (!isReskinnableMonster(actor)) return;\n  \n  entryOptions.unshift({\n    name: 'Reskin Monster',\n    icon: '<i class=\"fas fa-palette\"></i>',\n    callback: () => {\n      const reskinApp = new ReskinApp(actor);\n      reskinApp.render(true);\n    }\n  });\n});\n\n/**\n * Main module class for initialization and hooks\n */\nclass DrawSteelReskinner {\n  static init() {\n    console.log('Draw Steel Reskinner | Initializing module');\n  }\n\n  static ready() {\n    console.log('Draw Steel Reskinner | Ready - all hooks registered');\n  }\n}\n\n// Register the module hooks\nHooks.on('init', () => {\n  DrawSteelReskinner.init();\n});\n\nHooks.on('ready', () => {\n  DrawSteelReskinner.ready();\n});\n\n// Log module initialization\nconsole.log('Draw Steel Reskinner | Module loaded');\n"],"names":[],"mappings":"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"}