{"version":3,"file":"ds-reskinner.mjs","sources":["src/reskinner-app.js","src/module.js"],"sourcesContent":["/**\n * ReskinApp - Main application for reskinning monsters (Draw Steel V13 Compatible)\n * Version: 0.1.49 - Updated button click event handling to collect input values correctly\n */\n\n/**\n * Application to be mixed in with Foundry's Handlebars functionality\n */\nconst HandlebarsApplication = foundry.applications.api.HandlebarsApplicationMixin(foundry.applications.api.ApplicationV2);\n\n/**\n * The Reskin application window\n */\nexport class ReskinApp extends HandlebarsApplication {\n  /**\n   * Define the template parts for this application.\n   */\n  static PARTS = {\n    \"content\": {\n      template: \"modules/ds-reskinner/templates/reskin-form.hbs\"\n    }\n  };\n  \n  /**\n   * Define action handlers for this application\n   */\n  static ACTIONS = {\n    cancel: 'close'\n  };\n  \n  /**\n   * Default configuration for the application\n   * @returns {Object} Application options\n   * @override\n   */\n  static get defaultOptions() {\n    return foundry.utils.mergeObject(super.defaultOptions, {\n      window: {\n        title: game.i18n.localize('DSRESKINNER.ReskinMonster'),\n        contentClasses: ['reskinner-app'],\n        minimizable: true,\n        resizable: true,\n        positioned: true\n      },\n      position: {\n        width: 600,\n        height: 'auto'\n      },\n      classes: ['reskinner-app']\n    });\n  }\n\n\n\n  /**\n   * Render the application\n   * @param {boolean} force - Force re-rendering\n   * @param {object} options - Rendering options\n   * @returns {Promise<this>} This application instance\n   * @override\n   */\n  async render(force = false, options = {}) {\n    console.log('ReskinApp | render called with force:', force, 'options:', options);\n    \n    // Log before calling parent render to track execution flow\n    console.log('ReskinApp | About to call super.render()');\n    \n    // Call the parent render method to ensure proper initialization\n    const result = await super.render(force, options);\n    \n    // Log after to verify the render completed\n    console.log('ReskinApp | super.render() completed, result:', result);\n    \n    return result;\n  }\n\n  /**\n   * Prepare context for the application template\n   * @param {object} options - Options passed to the template rendering function\n   * @returns {object} The template context data\n   * @override\n   */\n  async _prepareContext(options = {}) {\n    console.log('ReskinApp | _prepareContext called with actor:', this.actor?.name || 'undefined');\n    console.log('ReskinApp | Actor data:', {\n      name: this.actor?.name,\n      id: this.actor?.id,\n      type: this.actor?.type,\n      system: typeof this.actor?.system !== 'undefined' ? 'available' : 'undefined'\n    });\n    \n    if (!this.actor) {\n      throw new Error('ReskinApp | Actor is required but not provided');\n    }\n    \n    const context = {\n      actor: this.actor,\n      actorName: this.actor.name || this.actor.data?.name || 'Unknown',\n      actorId: this.actor.id || this.actor._id\n    };\n    \n    console.log('ReskinApp | Preparing context for template:', 'modules/ds-reskinner/templates/reskin-form.hbs', 'with data:', context);\n    \n    return context;\n  }\n\n  /**\n   * Prepare context for each template part\n   * @param {string} partId - The partId name\n   * @param {object} context - The context data\n   * @returns {object} The part-specific context\n   * @override\n   */\n  async _preparePartContext(partId, context) {\n    return context;\n  }\n\n  /**\n   * Called after the application renders and is added to the DOM\n   * @param {HTMLElement} element - The HTML element that was rendered\n   * @override\n   */\n  _onRender(context, options) {\n    super._onRender(context, options);\n    \n    console.log('ReskinApp | _onRender called with element:', this.element);\n    \n    // Find the submit button and attach a click handler instead of form submit\n    const submitBtn = this.element.querySelector('button[data-action=\"submit\"]');\n    if (submitBtn) {\n      console.log('ReskinApp | Found submit button! Attaching click handler.');\n      submitBtn.addEventListener('click', (event) => this._handleFormSubmit(event));\n    } else {\n      console.log('ReskinApp | âŒ Submit button not found');\n    }\n    \n    // Also handle cancel\n    const cancelBtn = this.element.querySelector('button[data-action=\"cancel\"]');\n    if (cancelBtn) {\n      cancelBtn.addEventListener('click', (event) => {\n        event.preventDefault();\n        this.close();\n      });\n    }\n    \n    console.log('ReskinApp | Window content element:', this.element?.[0]);\n    console.log('ReskinApp | Application is in DOM:', this.element?.[0] && this.element?.[0].isConnected ? 'yes' : 'no');\n  }\n\n  /**\n   * Create the ReskinApp\n   * @param {Actor} actor - The actor to reskin\n   * @param {Object} options - Additional options\n   */\n  constructor(actor, options = {}) {\n    super(options);\n    \n    this.actor = actor;\n    console.log('ReskinApp | Constructor called with actor:', actor?.name || 'undefined');\n  }\n\n  /**\n   * Handle form submission manually when the submit button is clicked\n   * @param {Event} event - The button click event\n   */\n  async _handleFormSubmit(event) {\n    event.preventDefault();\n    \n    // Manually collect form data since section element won't create FormDataExtended correctly\n    const inputElement = this.element.querySelector('input[name=\"actorName\"]');\n    const newName = inputElement ? inputElement.value : '';\n    \n    console.log('ReskinApp | Form submitted with name:', newName);\n    \n    if (!newName || newName.trim() === '') {\n      ui.notifications.error(game.i18n.localize('DSRESKINNER.NameEmptyError'));\n      return;\n    }\n    \n    try {\n      const sourceData = this.actor.toObject();\n      const newActorData = foundry.utils.mergeObject(sourceData, {\n        name: newName.trim(),\n        _id: null,\n        folder: null,\n        ownership: { default: CONST.DOCUMENT_OWNERSHIP_LEVELS.NONE }\n      });\n      \n      await Actor.create(newActorData);\n      ui.notifications.info(game.i18n.format('DSRESKINNER.CreateSuccess', { name: newName }));\n      this.close();\n    } catch (error) {\n      console.error('Draw Steel Reskinner | Error creating reskin:', error);\n      ui.notifications.error(game.i18n.localize('DSRESKINNER.CreateError'));\n    }\n  }\n\n\n\n\n\n\n\n\n\n  /**\n   * Cancel form action  \n   * @param {Event} event - The event that triggered this action\n   * @param {HTMLElement} element - The element the action occurred on \n   */\n  async _onFormCancel(event) {  \n    event.preventDefault();  \n    this.close();\n  }\n\n\n}\n","/**\n * Draw Steel Reskinner Module\n * A Foundry VTT module for reskinning Draw Steel monsters\n * Version: 0.1.49 - Updated button click event handling to collect input values correctly\n */\n\n// Centralized version reference to ensure consistency across the module\nconst MODULE_VERSION = '0.1.49';\n\nimport { ReskinApp } from './reskinner-app.js';\n\n/**\n * Check if an actor is a monster NPC that can be reskinned\n * @param {Actor} actor - The actor to check\n * @returns {boolean} True if the actor is a reskinnable monster\n */\nfunction isReskinnableMonster(actor) {\n  // Check if it's an NPC (monster) in the Draw Steel system\n  if (!actor || actor.type !== 'npc') return false;\n  \n  // Check if it's in the Draw Steel system\n  const isDrawSteel = game.system.id === 'draw-steel';\n  if (!isDrawSteel) return false;\n  \n  return true;\n}\n\n/**\n * Add Reskin button to actor sheet headers\n */\nHooks.on('getActorSheetHeaderButtons', (sheet, buttons) => {\n  console.log('getActorSheetHeaderButtons hook triggered');\n  console.log('Sheet actor:', sheet.actor);\n  console.log('Is reskinnable?', sheet.actor ? isReskinnableMonster(sheet.actor) : 'No actor found');\n  \n  if (!isReskinnableMonster(sheet.actor)) return;\n  \n  console.log('Adding Reskin button to actor sheet header');\n  buttons.unshift({\n    class: 'reskin-actor',\n    icon: 'fas fa-palette',\n    label: game.i18n.localize('DSRESKINNER.Reskin'),\n    onclick: async () => {\n      console.log('Reskin button clicked, creating ReskinApp for:', sheet.actor.name);\n      const reskinApp = new ReskinApp(sheet.actor);\n      console.log('ReskinApp instance created from sheet header, calling render...');\n      await reskinApp.render(true);\n      console.log('ReskinApp render called and awaited from sheet header');\n    }\n  });\n});\n\n/**\n * Add Reskin option to actor context menu (Foundry VTT v13)\n */\nHooks.on('getActorContextOptions', (html, menuItems) => {\n  console.log('getActorContextOptions called with html element and', menuItems.length, 'existing items');\n  \n  // Add the context menu option for reskinning\n  menuItems.push({\n    name: game.i18n.localize('DSRESKINNER.ReskinMonster'),\n    icon: '<i class=\"fas fa-palette\"></i>',\n    condition: (li) => {\n      console.log('Condition function called with li element:', li);\n      // Get actor ID from the list item's dataset (Foundry V13 way, replacing jQuery .data() method)\n      const actorId = li.dataset.documentId || li.dataset.entryId;\n      if (!actorId) {\n        console.log('No actor ID found in element dataset');\n        return false;\n      }\n      \n      const actor = game.actors.get(actorId);\n      console.log('Found actor in condition:', actor ? {name: actor.name, type: actor.type} : 'none');\n      \n      const result = actor ? isReskinnableMonster(actor) : false;\n      console.log('Condition result:', result);\n      return result;\n    },\n    callback: async (li) => {\n      console.log('Callback function called with li element:', li);\n      // Get actor ID from the list item's dataset (Foundry V13 way, replacing jQuery .data() method)\n      const actorId = li.dataset.documentId || li.dataset.entryId;\n      if (!actorId) {\n        console.warn('No actor ID found in element dataset');\n        return;\n      }\n      \n      const actor = game.actors.get(actorId);\n      if (!actor) {\n        console.warn('Could not find actor with ID:', actorId);\n        return;\n      }\n      \n      console.log('Opening reskin app for actor:', actor.name);\n      const reskinApp = new ReskinApp(actor);\n      console.log('ReskinApp instance created, calling render...');\n      await reskinApp.render(true);\n      console.log('ReskinApp render called and awaited');\n    }\n  });\n});\n\n/**\n * Main module class for initialization and hooks\n */\nclass DrawSteelReskinner {\n  static init() {\n    console.log(`Draw Steel Reskinner | Initializing module version ${MODULE_VERSION} - Enhanced actor detection including DOM traversal when app.context is undefined`);\n  }\n\n  static ready() {\n    console.log(`Draw Steel Reskinner | Ready - all hooks registered version ${MODULE_VERSION}`);\n  }\n}\n\n// Register the module hooks\nHooks.on('init', () => {\n  DrawSteelReskinner.init();\n});\n\nHooks.on('ready', () => {\n  DrawSteelReskinner.ready();\n});\n\n// Log module initialization\nconsole.log(`Draw Steel Reskinner | Module loaded version ${MODULE_VERSION}`);\n"],"names":[],"mappings":"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"}